{% extends 'base.html.twig' %}

{% block title %}Claim{% endblock %}

{% block tableForm %}
<div style=" justify-content: center; margin-left: 150px;">

    <div class="card">
        <div  style="display: flex;align-items: center;justify-content: center;margin-top: 20px; padding: 50px;">

            <div class="card-body">
                <a href="{{ path('app_reclam_pdf',{'idr':reclam.idr}) }}"><img src="{{ asset('images/pdf.png') }}" width="50" height="50"></a>
                <center> <h1 class="card-title" >Claim</h1> </center>

    <table class="table">
        <tbody>
            <tr>
                <th>Idr</th>
                <td>{{ reclam.idr }}</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>{{ reclam.titre }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ reclam.description }}</td>
            </tr>
            <tr>
                <th>Image</th>
                <td><img src="{{vich_uploader_asset(reclam,'imageFile') }}" width="200" height="200"></td>
            </tr>
            <tr>
                <th>Date</th>
                <td>{{ reclam.dater ? reclam.dater|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>User</th>
                <td>{{ reclam.idUser.prenomUser }} {{ reclam.idUser.nomUser }}</td>
            </tr>
            <tr>
                <th>Idtyper</th>
                <td>{{ reclam.idtyper.nom }}</td>
            </tr>
            <tr>
                <th>Etat</th>
                <td>{{ reclam.etat }}</td>
            </tr>
            <tr>
                <th scope="col">Responses</th>
            <tr>
                <th>Object</th>
                <th>Description</th>
                <th>Status</th>

            </tr>
                {% for reponse in reponses %}
            <tr>
                <td>{{ reponse.objet}}</td>
                <td>{{ reponse.description }}</td>
                <td>
                    {% if reponse.etat is not null and reponse.etat=="Satisfied" %}
                    <img src="{{ asset('images/satisfied.png') }}" height="50" width="50">
                    {% elseif reponse.etat is not null and reponse.etat=="Unsatisfied" %}
                        <img src="{{ asset('images/unsatisfied.png') }}" height="50" width="50">
                    {% endif %}
                </td>
                {% if reponse.etat =="Unsatisfied" %}
                <td> <button class="btn btn-primary" onclick="window.location.href=' {{ path('app_reponse_new', {'idr':reclam.idr}) }}'">Send new response</button></td>
           {% endif %}
            </tr>

            {% endfor %}
            </tr>
        </tbody>
    </table>


                <button class="btn btn-primary" onclick="window.location.href='{{ path('app_reclam_index' ) }}'">Back to list</button>

                <button class="btn btn-primary" onclick="window.location.href='{{ path('app_reclam_edit', {'idr': reclam.idr}) }}'">Edit</button>
    {{ include('reclam/_delete_form.html.twig') }}
            </div>
        </div>
    </div>
</div>
{% endblock %}
